(()=>{"use strict";const e=(e,t)=>({id:e,name:t,items:[]}),t=e=>{const t=document.createElement("div");t.classList.add("project-item"),t.id=e.id;const n=document.createElement("div");n.classList.add("left");const o=document.createElement("button");o.classList.add("custom"),o.addEventListener("click",(function(){e.done=!e.done,e.done?t.classList.add("concluded"):t.classList.remove("concluded"),function(e){let t=d(e.projectId),n=JSON.parse(localStorage.allProjects);for(let c=0;c<n.length;c++){let o=n[c];if(o.id==t.id){for(let t=0;t<o.items.length;t++)if(o.items[t].id==e.id){n[c].items[t].done=e.done;break}break}}localStorage.allProjects=JSON.stringify(n)}(e)})),n.appendChild(o);const a=document.createElement("div");a.classList.add("center");const l=document.createElement("div");l.classList.add("description");const i=document.createElement("p");i.textContent=e.description,l.appendChild(i);const s=document.createElement("div");s.classList.add("dates");const r=document.createElement("p");r.classList.add("date"),r.textContent="start: "+e.startString;const m=document.createElement("p");m.classList.add("date"),m.textContent="end: "+e.endString,s.appendChild(r),s.appendChild(m),a.appendChild(l),a.appendChild(s);const u=document.createElement("div");u.classList.add("rigth");const p=document.createElement("button");p.addEventListener("click",(function(){!function(e){let t=JSON.parse(localStorage.currentProject),n=JSON.parse(localStorage.allProjects),o=null;for(let c=0;c<n.length;c++)if(o=n[c],o.id=t.id)for(let t=0;t<o.items.length;t++){let d=o.items[t];if(d.id==e.id){let e=o.items.indexOf(d);console.log(e),n[c].items.splice(e,1),console.log(o.items);break}}localStorage.allProjects=JSON.stringify(n),c(o)}(e)}));const h=document.createElement("img");return h.src="../src/assets/delete.png",p.appendChild(h),u.appendChild(p),t.appendChild(n),t.appendChild(a),t.appendChild(u),t};const n=e=>{const t=document.createElement("div");t.classList.add("menu-project"),t.id=`menu-project-${e.id}`,t.addEventListener("click",(function(){o(t.id),c(e)}));const n=document.createElement("p");return n.textContent=e.name,t.appendChild(n),t};function c(e){e=d(e.id),console.log(e),document.querySelector(".main-container .main-content .project-title p").textContent=e.name,e.id<=1?function(){const e=document.querySelector(".main-container .main-content .add-button-container button");e.classList.add("hided"),console.log(e)}():document.querySelector(".main-container .main-content .add-button-container button").classList.remove("hided"),console.log(e.id),function(e){!function(){const e=document.querySelector(".project-items-container");let t=e.childNodes.length;for(let n=0;n<t;n++)e.removeChild(e.childNodes[0])}();const n=document.querySelector(".project-items-container");e.forEach((e=>{n.appendChild(t(e))}))}(e.items),function(e){localStorage.currentProject=JSON.stringify(e)}(e)}function o(e){let t=document.querySelector(".side-bar .active");t&&t.classList.remove("active"),document.getElementById(e).classList.add("active")}function d(e){let t=JSON.parse(localStorage.allProjects),n=null;for(let c=0;c<t.length;c++){let o=t[c];if(o.id==e){n=o;break}}return n}function a(){return JSON.parse(localStorage.allProjects)}function l(t){let d=function(){let e=JSON.parse(localStorage.allProjects),t=-1;for(let n=0;n<e.length;n++)e[n].id>t&&(t=e[n].id);return t}(),l=e(d+1,t),i=JSON.parse(localStorage.allProjects);i.push(l),localStorage.allProjects=JSON.stringify(i),function(){const e=document.querySelector(".side-bar .menu-container .projects-container");!function(){const e=document.querySelector(".side-bar .menu-container .projects-container");let t=e.childNodes.length;for(let n=0;n<t;n++)e.removeChild(e.childNodes[0])}();let t=a();for(let c=2;c<t.length;c++){let o=t[c];e.appendChild(n(o)),console.log(o)}}(),c(l),o("menu-project-"+l.id)}const i=()=>{const e=document.querySelector(".disabled-bg");e.classList.add("active");const t=document.createElement("form");t.classList.add("form-add-project");const n=document.createElement("button");n.textContent="X",n.addEventListener("click",(function(){e.classList.remove("active"),document.body.removeChild(t)}));const c=document.createElement("p");c.textContent="New project";const o=document.createElement("input");o.type="text",o.placeholder="Project name",o.required=!0,o.addEventListener("input",(function(){o.classList.contains("wrong")&&(console.log("changed"),o.classList.remove("wrong"),d.classList.remove("active"))}));const d=document.createElement("p");d.textContent="Nome inválido!";const a=document.createElement("button");return a.textContent="Add project",a.addEventListener("click",(function(){event.preventDefault(),(()=>{let e=!0;return""==o.value?(e=!1,d.textContent="Preencha o campo obrigatório"):function(e){let t=JSON.parse(localStorage.allProjects);for(let n=0;n<t.length;n++)if(t[n].name==e)return t[n];return null}(o.value)&&(e=!1,d.textContent="Nome ja registrado"),e||(o.classList.add("wrong"),d.classList.add("active")),e})()&&(e.classList.remove("active"),document.body.removeChild(t),l(o.value))})),t.appendChild(n),t.appendChild(c),t.appendChild(o),t.appendChild(d),t.appendChild(a),t},s=document.querySelector(".container");s.appendChild((()=>{const e=document.createElement("header"),t=document.createElement("h1");return t.textContent="TO • DO • LIST",e.appendChild(t),e})()),s.appendChild((()=>{const e=document.createElement("div");e.classList.add("side-bar");const t=document.createElement("div");t.classList.add("add-button-container");const n=document.createElement("button");n.addEventListener("click",(function(){document.body.appendChild(i())}));const o=document.createElement("img");o.src="../src/assets/plus.png";const a=document.createElement("p");a.textContent="New project",n.appendChild(o),n.appendChild(a),t.appendChild(n);const l=e=>{let t=document.querySelector(".side-bar .active");t&&t.classList.remove("active"),e.classList.add("active")},s=document.createElement("div");s.classList.add("menu-container");const r=document.createElement("button");r.textContent="All today",r.classList.add("active"),r.addEventListener("click",(function(){l(r),c(d(0))}));const m=document.createElement("button");m.textContent="All this week",m.addEventListener("click",(function(){l(m),c(d(1))}));const u=document.createElement("p");u.textContent="Projects";const p=document.createElement("div");return p.classList.add("projects-container"),s.appendChild(r),s.appendChild(m),s.appendChild(u),s.appendChild(p),e.appendChild(t),e.appendChild(s),e})()),s.appendChild((()=>{const t=document.createElement("div");t.classList.add("main-container");const n=document.createElement("div");n.classList.add("main-content");const o=document.createElement("div");o.classList.add("project-title");const d=document.createElement("p");d.textContent="Nome do projeto",o.appendChild(d);const a=e=>{let t=document.querySelector(".main-container .project-items-filter .active");t&&t.classList.remove("active"),e.classList.add("active")},l=document.createElement("div");l.classList.add("project-items-filter");const i=document.createElement("button");i.textContent="All",i.classList.add("active"),i.addEventListener("click",(function(){a(i)}));const s=document.createElement("button");s.textContent="Today",s.addEventListener("click",(function(){a(s)}));const r=document.createElement("button");r.textContent="This week",r.addEventListener("click",(function(){a(r)})),l.appendChild(i),l.appendChild(s),l.appendChild(r);const m=document.createElement("div");m.classList.add("project-items-container");const u=document.createElement("p");u.classList.add("empty"),u.textContent="No items found";const p=document.createElement("div");p.classList.add("add-button-container");const h=document.createElement("button");h.addEventListener("click",(function(){document.body.appendChild((()=>{let e=JSON.parse(localStorage.currentProject);console.log(e);const t=document.querySelector(".disabled-bg");t.classList.add("active");const n=document.createElement("form");n.classList.add("form-add-item");const o=document.createElement("button");o.textContent="X",o.addEventListener("click",(function(){t.classList.remove("active"),document.body.removeChild(n)}));const d=document.createElement("p");d.innerHTML=`<strong>${e.name}</strong> new item`;const a=document.createElement("textarea");a.cols=30,a.rows=10,a.placeholder="item description",a.required=!0,a.addEventListener("input",(function(){l.classList.remove("active"),a.classList.remove("wrong")}));const l=document.createElement("p");l.textContent="wrong",l.classList.add("wrong");const i=document.createElement("div");i.classList.add("dates-container");const s=document.createElement("input");s.type="date",s.min=new Date,s.valueAsDate=new Date,s.onkeydown=()=>!1,s.addEventListener("input",(function(){r.min=s.value,r.value<s.value&&(r.value=s.value)}));const r=document.createElement("input");r.type="date",r.min=new Date,r.valueAsDate=new Date,r.onkeydown=()=>!1,s.addEventListener("input",(function(){onEndInputChanged()})),i.appendChild(s),i.appendChild(r);const m=document.createElement("button");return m.textContent="adicionar",m.addEventListener("click",(function(){if(event.preventDefault(),(()=>{let e=!0;return console.log(s.value),""==a.value&&(e=!1,a.classList.add("wrong"),l.classList.add("active"),l.textContent="campo obrigatório"),e})()){t.classList.remove("active"),document.body.removeChild(n);let o=function(e){let t=JSON.parse(localStorage.allProjects),n=0;for(let c=0;c<t.length;c++)if(t[c].id==e.id){n=t[c].items.length;break}return n}(e)+1,d=a.value,l=s.valueAsDate,i=r.valueAsDate,m=((e,t,n,c,o,d)=>{let a=c.getDate(),l=c.getMonth(),i=`${a<10?`0${a}`:a}/${l<10?`0${l}`:l}/${c.getFullYear()}`;a=o.getDate(),l=o.getMonth();let s=`${a<10?`0${a}`:a}/${l<10?`0${l}`:l}/${c.getFullYear()}`;return{id:e,projectId:t,description:n,start:c,end:o,done:d,startString:i,endString:s}})(o,e.id,d,l,i,!1);!function(e,t){let n=JSON.parse(localStorage.allProjects);for(let c=0;c<n.length;c++)if(n[c].id==e.id){n[c].items.push(t);break}localStorage.allProjects=JSON.stringify(n)}(e,m),c(e)}})),n.appendChild(o),n.appendChild(d),n.appendChild(a),n.appendChild(l),n.appendChild(i),n.appendChild(m),n})(e(0,"Teste")))}));const v=document.createElement("img");v.src="../src/assets/plus.png";const C=document.createElement("p");return C.textContent="New item",h.appendChild(v),h.appendChild(C),p.appendChild(h),n.appendChild(o),n.appendChild(l),n.appendChild(m),n.appendChild(u),n.appendChild(p),t.appendChild(n),t})()),function(){let t=e(0,"All today");t.items=[];let n=e(1,"All this Week");n.items=[];let o=[t,n];localStorage.allProjects=JSON.stringify(o),c(t)}(),a()})();